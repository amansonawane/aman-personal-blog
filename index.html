<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aman Sonawane | personal blog</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Custom Styles -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000000; /* Fallback for when canvas isn't loaded */
        }
        #starfield {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1; /* Place canvas behind all content */
        }
        /* Style for the active navigation link */
        .nav-link.active {
            color: #ffffff;
            text-decoration: underline;
            text-underline-offset: 4px;
        }
        /* Ensure page sections are hidden by default, JS will show the correct one */
        .page-section {
            display: none;
        }
        .page-section.active {
            display: block;
        }
        /* Style for the liked heart button */
        .like-button.liked svg {
            fill: #ef4444; /* red-500 */
            color: #ef4444;
        }
        /* Style for active sort button */
        .sort-button.active {
            background-color: #ffffff;
            color: #000000;
        }
    </style>
</head>
<body class="bg-black text-gray-300 antialiased">

    <!-- Animated Background -->
    <canvas id="starfield"></canvas>

    <!-- Main Container -->
    <div class="container mx-auto max-w-4xl px-4 sm:px-6 lg:px-8 py-12 relative z-10">

        <!-- Header and Navigation -->
        <header class="flex flex-col sm:flex-row justify-between items-center mb-12">
            <!-- Name/Logo -->
            <div class="mb-4 sm:mb-0">
                <a href="#home" class="text-2xl font-bold text-white nav-link" data-page="home">aman sonawane</a>
            </div>
            <!-- Navigation Links -->
            <nav>
                <ul class="flex space-x-6">
                    <li><a href="#home" class="nav-link text-gray-400 hover:text-white transition-colors duration-300" data-page="home">home</a></li>
                    <li><a href="#writings" class="nav-link text-gray-400 hover:text-white transition-colors duration-300" data-page="writings">writings</a></li>
                </ul>
            </nav>
        </header>

        <!-- Main Content Area -->
        <main id="main-content">

            <!-- Home Page Section -->
            <section id="home" class="page-section">
                <!-- Hero Introduction Section -->
                <div class="text-center pt-24 pb-32">
                    <h1 class="text-3xl md:text-4xl font-bold text-white mb-4">curious. driven. hungry.</h1>
                    <p class="text-lg md:text-xl text-gray-200 max-w-3xl mx-auto leading-relaxed">
                        hi, my name is aman. welcome to my small corner in this universe. i am a founding pe analyst at <a href="https://www.successioncapital.in/" target="_blank" rel="noopener noreferrer" class="underline hover:text-white transition-all duration-200 inline-block transform hover:scale-110">scpi</a>. i love reading, vibe coding, motorcycling & playing video games. this is my personal space to document my journey, share insights, and write about things i find interesting.
                    </p>
                </div>
                
                <h2 class="text-3xl font-bold text-white mb-8 text-center">latest posts</h2>
                <div id="recent-posts-container" class="space-y-16"></div>
                <!-- Subscription section will be injected here by JS -->
            </section>

            <!-- Writings Page Section -->
            <section id="writings" class="page-section">
                <div class="flex flex-col sm:flex-row justify-between items-center mb-8">
                    <h1 class="text-3xl font-bold text-white mb-4 sm:mb-0">writings</h1>
                    <div id="sort-controls" class="flex items-center gap-2">
                        <span class="text-sm text-gray-400 mr-2">sort by:</span>
                        <button class="sort-button text-sm px-3 py-1 border border-gray-700 rounded-md hover:bg-gray-800 transition-colors" data-sort="recent">recent</button>
                        <button class="sort-button text-sm px-3 py-1 border border-gray-700 rounded-md hover:bg-gray-800 transition-colors" data-sort="oldest">oldest</button>
                        <button class="sort-button text-sm px-3 py-1 border border-gray-700 rounded-md hover:bg-gray-800 transition-colors" data-sort="popular">popular</button>
                    </div>
                </div>
                <div id="all-posts-container" class="space-y-8"></div>
                <!-- Subscription section will be injected here by JS -->
            </section>

            <!-- Single Post Page Section -->
            <section id="post" class="page-section">
                <!-- Content is dynamically generated by showPost() -->
            </section>

        </main>
        
        <!-- Footer Section -->
        <footer class="mt-16 pt-8 border-t border-gray-800 flex justify-between items-center text-sm text-gray-200">
            <div>
                <a href="mailto:aman@successioncapital.in" class="hover:text-white transition-colors duration-300">aman@successioncapital.in</a>
            </div>
            <div>
                <a href="https://www.linkedin.com/in/aman-sonawane/" target="_blank" rel="noopener noreferrer" class="hover:text-white transition-colors duration-300">Li</a>
                <span class="mx-2">|</span>
                <a href="https://x.com/amansonawane_04" target="_blank" rel="noopener noreferrer" class="hover:text-white transition-colors duration-300">X</a>
            </div>
        </footer>

    </div>

    <!-- JavaScript for SPA Navigation and Content Rendering -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {

            // --- Canvas Animation Setup ---
            const canvas = document.getElementById('starfield');
            const ctx = canvas.getContext('2d');
            
            let stars = [];
            let galaxies = [];
            let constellations = [];
            let nebulae = [];
            let shootingStars = [];

            // --- Constellation Data (simple examples) ---
            const constellationPatterns = [
                { name: 'Orion', points: [{x:0,y:0},{x:20,y:10},{x:40,y:-5},{x:60,y:10},{x:80,y:0},{x:40,y:30},{x:40,y:-5}] },
                { name: 'Ursa Minor', points: [{x:0,y:0},{x:20,y:5},{x:40,y:15},{x:60,y:5},{x:80,y:0},{x:100,y:-10},{x:60,y:5}] }
            ];

            function setupCanvas() {
                if (!canvas) return;
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                
                // --- Create Stars ---
                stars = [];
                for (let i = 0; i < 400; i++) {
                    stars.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height,
                        radius: Math.random() * 1.2,
                        alpha: Math.random() * 0.8 + 0.2,
                        vx: Math.random() * 0.2 - 0.1,
                        vy: Math.random() * 0.2 - 0.1
                    });
                }

                // --- Create Galaxies ---
                galaxies = [];
                for (let i = 0; i < 3; i++) {
                    galaxies.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height,
                        radius: Math.random() * 50 + 20,
                        arms: Math.floor(Math.random() * 3) + 2,
                        rotation: Math.random() * Math.PI * 2
                    });
                }

                // --- Create Constellations ---
                constellations = [];
                for (let i = 0; i < 2; i++) {
                    const pattern = constellationPatterns[Math.floor(Math.random() * constellationPatterns.length)];
                    constellations.push({
                        pattern: pattern.points,
                        x: Math.random() * (canvas.width - 200) + 100,
                        y: Math.random() * (canvas.height - 100) + 50,
                        alpha: 0,
                        life: Math.random() * 2000 + 1000,
                        isFadingIn: true
                    });
                }
                
                // --- Create Nebulae (Star Clusters) ---
                nebulae = [];
                for (let i = 0; i < 4; i++) {
                    nebulae.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height,
                        radius: Math.random() * 80 + 40,
                        color: `rgba(${Math.floor(Math.random()*55)+100}, ${Math.floor(Math.random()*55)+100}, 255, 0.15)`
                    });
                }

                // --- Create Shooting Stars ---
                shootingStars = [];
                for (let i = 0; i < 2; i++) {
                    shootingStars.push(createShootingStar());
                }
            }

            function createShootingStar() {
                return {
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    len: Math.random() * 80 + 10,
                    speed: Math.random() * 3 + 2,
                    angle: Math.PI / 4, // 45 degree angle
                    active: false,
                    wait: Math.random() * 3000 + 1000 // Wait time before appearing
                };
            }

            function draw() {
                if (!ctx) return;
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // --- Draw Nebulae ---
                nebulae.forEach(nebula => {
                    const gradient = ctx.createRadialGradient(nebula.x, nebula.y, 0, nebula.x, nebula.y, nebula.radius);
                    gradient.addColorStop(0, nebula.color.replace('0.15', '0.3'));
                    gradient.addColorStop(1, nebula.color.replace('0.15', '0'));
                    ctx.fillStyle = gradient;
                    ctx.beginPath();
                    ctx.arc(nebula.x, nebula.y, nebula.radius, 0, Math.PI * 2);
                    ctx.fill();
                });

                // --- Draw Stars ---
                ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                stars.forEach(star => {
                    star.x += star.vx;
                    star.y += star.vy;
                    if (star.x < 0 || star.x > canvas.width) star.vx = -star.vx;
                    if (star.y < 0 || star.y > canvas.height) star.vy = -star.vy;

                    ctx.save();
                    ctx.globalAlpha = star.alpha;
                    ctx.beginPath();
                    ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.restore();
                });

                // --- Draw Galaxies ---
                galaxies.forEach(galaxy => {
                    ctx.save();
                    ctx.translate(galaxy.x, galaxy.y);
                    ctx.rotate(galaxy.rotation);
                    for (let i = 0; i < galaxy.arms; i++) {
                        for (let j = 0; j < 100; j++) {
                            const angle = j * 0.1 + (i * (Math.PI * 2 / galaxy.arms));
                            const dist = j * (galaxy.radius / 100);
                            const x = Math.cos(angle) * dist;
                            const y = Math.sin(angle) * dist;
                            const alpha = (1 - (dist / galaxy.radius)) * 0.5;
                            ctx.fillStyle = `rgba(255, 255, 255, ${alpha})`;
                            ctx.beginPath();
                            ctx.arc(x, y, Math.random() * 0.8, 0, Math.PI * 2);
                            ctx.fill();
                        }
                    }
                    galaxy.rotation += 0.0005;
                    ctx.restore();
                });

                // --- Draw and Animate Constellations ---
                constellations.forEach(con => {
                    if (con.isFadingIn) {
                        con.alpha += 0.01;
                        if (con.alpha >= 0.7) {
                            con.alpha = 0.7;
                            con.isFadingIn = false;
                            setTimeout(() => con.isFadingOut = true, con.life);
                        }
                    } else if (con.isFadingOut) {
                        con.alpha -= 0.01;
                        if (con.alpha <= 0) {
                           const pattern = constellationPatterns[Math.floor(Math.random() * constellationPatterns.length)];
                           con.pattern = pattern.points;
                           con.x = Math.random() * (canvas.width - 200) + 100;
                           con.y = Math.random() * (canvas.height - 100) + 50;
                           con.alpha = 0;
                           con.isFadingIn = true;
                           con.isFadingOut = false;
                        }
                    }
                    ctx.save();
                    ctx.strokeStyle = `rgba(255, 255, 255, ${con.alpha * 0.5})`;
                    ctx.fillStyle = `rgba(255, 255, 255, ${con.alpha})`;
                    ctx.lineWidth = 0.5;
                    ctx.beginPath();
                    for(let i = 0; i < con.pattern.length; i++) {
                        const p = con.pattern[i];
                        const x = con.x + p.x;
                        const y = con.y + p.y;
                        if(i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
                    }
                    ctx.stroke();
                    con.pattern.forEach(p => {
                         const x = con.x + p.x;
                         const y = con.y + p.y;
                         ctx.beginPath();
                         ctx.arc(x, y, 1.5, 0, Math.PI * 2);
                         ctx.fill();
                    });
                    ctx.restore();
                });

                // --- Draw and Animate Shooting Stars ---
                shootingStars.forEach((ss, index) => {
                    if (ss.active) {
                        ss.x += Math.cos(ss.angle) * ss.speed;
                        ss.y += Math.sin(ss.angle) * ss.speed;

                        if (ss.x > canvas.width + ss.len || ss.y > canvas.height + ss.len) {
                            shootingStars[index] = createShootingStar();
                            return;
                        }

                        const grad = ctx.createLinearGradient(ss.x, ss.y, ss.x - ss.len, ss.y - ss.len);
                        grad.addColorStop(0, 'rgba(255, 255, 255, 1)');
                        grad.addColorStop(1, 'rgba(255, 255, 255, 0)');
                        
                        ctx.strokeStyle = grad;
                        ctx.lineWidth = 2;
                        ctx.beginPath();
                        ctx.moveTo(ss.x, ss.y);
                        ctx.lineTo(ss.x - ss.len, ss.y - ss.len);
                        ctx.stroke();
                    } else {
                        ss.wait -= 16.67; // approx 1 frame at 60fps
                        if (ss.wait <= 0) {
                            ss.active = true;
                            ss.x = Math.random() * canvas.width / 2;
                            ss.y = 0;
                        }
                    }
                });


                requestAnimationFrame(draw);
            }
            
            window.addEventListener('resize', setupCanvas);
            
            // --- DATA ---
            const blogPosts = [
                {
                    slug: "the-great-indian-deeptech-debate",
                    title: "the great indian deeptech debate",
                    date: "2025-08-01",
                    summary: "exploring how minimalism and simplicity can lead to more effective and user-friendly digital products...",
                    content: `<p>in a world saturated with information and features, simplicity stands out. it's not about stripping away everything, but about being intentional. good design is about making something easy to understand and use, and often, that means removing the unnecessary.</p><p>one of the core principles of simple design is clarity. can a user immediately understand what they are looking at and what they can do? if the answer is no, the design has failed. this involves using clear language, intuitive layouts, and a visual hierarchy that guides the user's eye to the most important elements.</p>`,
                    likes: 0,
                    isLiked: false,
                    comments: []
                },
                {
                    slug: "hypothetical-what-if-you-got-into-iim-a-and-did-not-sit-for-placements",
                    title: "hypothetical - what if you got into iim-a and did not sit for placements",
                    date: "2025-07-22",
                    summary: "a beginner's guide to the utility-first css framework. learn how to set it up and start building beautiful, custom designs...",
                    content: `<p>tailwind css has taken the front-end world by storm, and for good reason. it offers a different approach to styling: instead of writing custom css classes, you apply pre-existing utility classes directly in your html.</p><p>this might sound messy at first, but it has profound benefits. it eliminates the need for naming conventions like bem, prevents css bloat, and makes your styling more consistent and maintainable.</p>`,
                    likes: 0,
                    isLiked: false,
                    comments: []
                },
                {
                    slug: "javascript-promises-vs-async-await",
                    title: "javascript promises vs. async/await",
                    date: "2025-07-15",
                    summary: "a deep dive into asynchronous javascript. we'll compare the classic promise syntax with the modern async/await approach...",
                    content: `<p>asynchronous operations are fundamental to modern web development. javascript, being single-threaded, relies on tools like promises and async/await to handle tasks like api calls without blocking the main thread.</p>`,
                    likes: 0,
                    isLiked: false,
                    comments: []
                },
            ];

            // --- STATE ---
            let currentSort = 'recent';

            // --- ELEMENTS ---
            const navLinks = document.querySelectorAll('.nav-link');
            const pageSections = document.querySelectorAll('.page-section');
            const recentPostsContainer = document.getElementById('recent-posts-container');
            const allPostsContainer = document.getElementById('all-posts-container');
            const singlePostContainer = document.getElementById('post');
            const sortControls = document.getElementById('sort-controls');

            // --- FUNCTIONS ---
            
            function formatDate(dateString) {
                const date = new Date(dateString);
                return date.toLocaleDateString('en-us', { year: 'numeric', month: 'long', day: 'numeric' });
            }

            function createSubscriptionSectionHTML() {
                return `<div class="mt-16 pt-8 border-t border-gray-800"><h2 class="text-2xl font-bold text-white mb-3">subscribe to the newsletter</h2><p class="text-gray-200 mb-6">get notified whenever i post. no spam. ever.</p><form class="subscription-form flex flex-col sm:flex-row gap-3"><input type="email" required placeholder="your.email@example.com" class="w-full px-4 py-2 bg-gray-950/80 border border-gray-700 rounded-md text-white focus:ring-2 focus:ring-white focus:outline-none transition-all duration-300"><button type="submit" class="bg-white text-black font-semibold px-5 py-2 rounded-md hover:bg-gray-300 transition-colors duration-300 flex-shrink-0">subscribe</button></form><div class="subscription-message mt-4 text-green-400"></div></div>`;
            }

            function createPostCard(post) {
                return `<a href="#post/${post.slug}" class="post-link block bg-gray-950/50 p-6 rounded-lg border border-gray-800 hover:border-gray-600 transition-all duration-300" data-slug="${post.slug}"><h2 class="text-xl font-semibold text-white mb-2">${post.title}</h2><p class="text-sm text-gray-500 mb-3">${formatDate(post.date)}</p><p class="text-gray-400 leading-relaxed">${post.summary}</p></a>`;
            }

            function renderPostCards(container, posts) {
                if (!container) return;
                container.innerHTML = posts.map(createPostCard).join('');
            }

            function createHomepagePostHTML(post) {
                const likedClass = post.isLiked ? 'liked' : '';
                return `<div class="full-post-wrapper" data-slug="${post.slug}"><h2 class="text-3xl font-bold text-white mb-2">${post.title}</h2><p class="text-md text-gray-500 mb-8">${formatDate(post.date)}</p><div class="text-lg leading-relaxed space-y-6">${post.content}</div><div class="mt-12 pt-6 border-t border-gray-800"><div class="flex items-center gap-4"><button class="like-button ${likedClass} flex items-center gap-2 text-gray-400 hover:text-white transition-colors duration-300" data-slug="${post.slug}"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 016.364 0L12 7.636l1.318-1.318a4.5 4.5 0 116.364 6.364L12 20.364l-7.682-7.682a4.5 4.5 0 010-6.364z"></path></svg><span class="like-count">${post.likes}</span></button><a href="#post/${post.slug}" class="text-gray-400 hover:text-white transition-colors duration-300 text-sm">view comments (${post.comments.length})</a></div></div></div>`;
            }

            function createFullPostHTML(post) {
                const likedClass = post.isLiked ? 'liked' : '';
                const commentsHTML = post.comments.map(comment => `<div class="bg-gray-950/50 p-4 rounded-lg border border-gray-800 mb-4"><div class="flex justify-between items-center mb-2"><p class="font-semibold text-white">${comment.name}</p><p class="text-xs text-gray-500">${comment.date}</p></div><p class="text-gray-400">${comment.text}</p></div>`).join('');
                return `<div class="full-post-wrapper" data-slug="${post.slug}"><h1 class="text-4xl font-bold text-white mb-2">${post.title}</h1><p class="text-md text-gray-500 mb-8">${formatDate(post.date)}</p><div class="text-lg leading-relaxed space-y-6 post-content-text">${post.content}</div><div class="mt-12 pt-6 border-t border-gray-800"><div class="flex items-center gap-4"><button class="like-button ${likedClass} flex items-center gap-2 text-gray-400 hover:text-white transition-colors duration-300" data-slug="${post.slug}"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 016.364 0L12 7.636l1.318-1.318a4.5 4.5 0 116.364 6.364L12 20.364l-7.682-7.682a4.5 4.5 0 010-6.364z"></path></svg><span class="like-count">${post.likes}</span></button></div></div><div class="mt-12"><h2 class="text-2xl font-bold text-white mb-6">comments (${post.comments.length})</h2><div class="comment-list mb-8">${commentsHTML}</div><h3 class="text-xl font-semibold text-white mb-4">leave a comment</h3><form class="comment-form" data-slug="${post.slug}"><div class="mb-4"><input type="text" name="name" placeholder="your name" required class="w-full px-4 py-2 bg-gray-950/80 border border-gray-700 rounded-md text-white focus:ring-2 focus:ring-white focus:outline-none transition-all duration-300"></div><div class="mb-4"><textarea name="comment" placeholder="your comment" required rows="4" class="w-full px-4 py-2 bg-gray-950/80 border border-gray-700 rounded-md text-white focus:ring-2 focus:ring-white focus:outline-none transition-all duration-300"></textarea></div><button type="submit" class="bg-white text-black font-semibold px-5 py-2 rounded-md hover:bg-gray-300 transition-colors duration-300">submit comment</button></form></div></div>`;
            }

            function showSection(sectionId) {
                pageSections.forEach(section => section.classList.toggle('active', section.id === sectionId));
            }
            
            function showPost(slug) {
                const post = blogPosts.find(p => p.slug === slug);
                if (post) {
                    singlePostContainer.innerHTML = `<div class="mb-8"><a href="#writings" class="nav-link text-gray-400 hover:text-white transition-colors duration-300" data-page="writings">&larr; back to writings</a></div>` + createFullPostHTML(post) + createSubscriptionSectionHTML();
                    showSection('post');
                } else {
                    showSection('home');
                }
            }
            
            function updateActiveLink(pageId) {
                navLinks.forEach(link => link.classList.toggle('active', link.dataset.page === pageId));
            }

            function sortAndRenderPosts() {
                const sortedPosts = [...blogPosts];
                if (currentSort === 'recent') sortedPosts.sort((a, b) => new Date(b.date) - new Date(a.date));
                else if (currentSort === 'oldest') sortedPosts.sort((a, b) => new Date(a.date) - new Date(b.date));
                else if (currentSort === 'popular') sortedPosts.sort((a, b) => b.likes - a.likes);
                renderPostCards(allPostsContainer, sortedPosts);
                sortControls.querySelectorAll('.sort-button').forEach(btn => btn.classList.toggle('active', btn.dataset.sort === currentSort));
            }
            
            function navigate() {
                const hash = window.location.hash;
                if (hash.startsWith('#post/')) {
                    const slug = hash.substring(6);
                    showPost(slug);
                    updateActiveLink(null);
                } else {
                    const pageId = hash.substring(1) || 'home';
                    showSection(pageId);
                    updateActiveLink(pageId);
                    if (pageId === 'writings') sortAndRenderPosts();
                }
                 window.scrollTo(0, 0);
            }

            // --- EVENT LISTENERS ---
            document.body.addEventListener('click', function(event) {
                const link = event.target.closest('a');
                if (link && link.getAttribute('href')?.startsWith('#')) {
                    event.preventDefault();
                    history.pushState(null, '', link.getAttribute('href'));
                    navigate();
                    return;
                }
                const likeButton = event.target.closest('.like-button');
                if (likeButton) {
                    const slug = likeButton.dataset.slug;
                    const post = blogPosts.find(p => p.slug === slug);
                    if (post) {
                        post.isLiked = !post.isLiked;
                        post.isLiked ? post.likes++ : post.likes--;
                        document.querySelectorAll(`.like-button[data-slug="${slug}"]`).forEach(btn => {
                            btn.classList.toggle('liked', post.isLiked);
                            btn.querySelector('.like-count').textContent = post.likes;
                        });
                    }
                }
                const sortButton = event.target.closest('.sort-button');
                if (sortButton) {
                    currentSort = sortButton.dataset.sort;
                    sortAndRenderPosts();
                }
            });
            
            document.body.addEventListener('submit', function(event) {
                if (event.target.matches('.subscription-form')) {
                    event.preventDefault();
                    const form = event.target, messageEl = form.nextElementSibling, inputEl = form.querySelector('input[type="email"]');
                    if (messageEl) messageEl.textContent = `thank you! ${inputEl.value} has been added.`;
                    if (inputEl) inputEl.value = '';
                    setTimeout(() => { if (messageEl) messageEl.textContent = ''; }, 5000);
                    return;
                }
                if (event.target.matches('.comment-form')) {
                    event.preventDefault();
                    const form = event.target, slug = form.dataset.slug, post = blogPosts.find(p => p.slug === slug);
                    if (post) {
                        const newComment = { name: form.elements.name.value, date: new Date().toLocaleDateString('en-us', { month: 'short', day: 'numeric', year: 'numeric' }).toLowerCase(), text: form.elements.comment.value };
                        post.comments.unshift(newComment);
                        if (window.location.hash === `#post/${slug}`) showPost(slug);
                        else if (window.location.hash === '' || window.location.hash === '#home') initializeHomepage();
                    }
                }
            });

            window.addEventListener('popstate', navigate);

            // --- INITIALIZATION ---
            function initializeHomepage() {
                const recentPosts = [...blogPosts].sort((a, b) => new Date(b.date) - new Date(a.date)).slice(0, 3);
                recentPostsContainer.innerHTML = recentPosts.map(createHomepagePostHTML).join('<hr class="my-16 border-gray-800">');
            }

            function initialize() {
                setupCanvas();
                draw(); // Start the animation loop
                initializeHomepage();
                sortAndRenderPosts();
                const subscriptionHTML = createSubscriptionSectionHTML();
                document.getElementById('home').insertAdjacentHTML('beforeend', subscriptionHTML);
                document.getElementById('writings').insertAdjacentHTML('beforeend', subscriptionHTML);
                navigate();
            }

            initialize();
        });
    </script>

</body>
</html>

